# Quest 10. 인증의 이해

## Introduction

- 이번 퀘스트에서는 웹에서의 인증에 관해 알아보겠습니다.

## Topics

- Cookie
- Session
- JWT

## Resources

- [MDN - HTTP 쿠키](https://developer.mozilla.org/ko/docs/Web/HTTP/Cookies)
- [Cookies and Sessions](https://web.stanford.edu/~ouster/cgi-bin/cs142-fall10/lecture.php?topic=cookie)
- [JWT](https://jwt.io/)

## Checklist

- 쿠키란 무엇일까요?
  - 인터넷 사용자가 어떤 웹사이트를 방문시 해당 웹사이트에서 사용자의 컴퓨터에 저장하는 작은 데이터 파일
  - 일반적으로 사용자가 다시 웹사이트를 방문할 때 해당 사이트에서 사용자를 인식, 사용자의 개인 설정이나 로그인 정보 등을 유지하기 위해 사용
  - 쿠키는 사용자의 컴퓨터에서만 저장되며, 웹사이트에서는 해당 쿠키에 저장된 정보를 읽어들이고 활용 가능
- 쿠키는 어떤 식으로 동작하나요?
  - 웹사이트와 사용자 컴퓨터 사이에서 정보를 주고 받음
  - 일반적으로 웹사이트에서는 사용자가 로그인 정보를 입력하거나 설정을 변경하면, 해당 정보를 쿠키에 저장
  - 사용자가 다시 웹사이트를 방문할 때, 웹사이트는 저장된 쿠키를 읽어서 사용자의 이전 설정이나 로그인 상태 등 파악
- 쿠키는 어떤 식으로 서버와 클라이언트 사이에 정보를 주고받나요?
  1. 클라이언트(웹 브라우저)가 서버에 HTTP 요청 전송
  2. 서버는 요청에 대한 응답으로 HTTP 헤더(Header)와 HTTP 본문(Body)을 전송
  3. HTTP 헤더 중 Set-Cookie 헤더를 사용하여 쿠키 정보를 클라이언트에 전송(쿠키 이름, 쿠키 값, 만료 날짜 등이 포함)
  4. 클라이언트는 서버로부터 전송된 쿠키 정보를 자신의 로컬 저장소에 저장
  5. 이후 클라이언트가 같은 서버에 HTTP 요청을 보낼 때마다, 클라이언트는 저장된 쿠키 정보를 HTTP 요청 헤더에 포함하여 서버로 전송
  6. 서버는 클라이언트로부터 전송된 쿠키 정보를 확인하고, 해당 정보에 따라 적절한 처리를 수행
- 웹 어플리케이션의 세션이란 무엇일까요?
  - 클라이언트와 서버 간에 일정 시간 동안 유지되는 상태 정보
  - 세션은 일반적으로 사용자 인증 정보나 웹사이트 상태 정보 등을 유지하기 위해 사용
- 세션의 ID와 내용은 각각 어디에 저장되고 어떻게 서버와 교환되나요?
  - 쿠키(Cookie)를 통해 클라이언트에 저장
  - 서버는 세션 ID를 클라이언트에게 전달하기 위해 Set-Cookie 헤더를 이용하여 쿠키를 생성 -> HTTP 응답(Response)에 포함시켜 클라이언트로 전송
  - 클라이언트는 서버로부터 전송받은 쿠키를 HTTP 요청(Request)에 포함시켜 서버에 전달 -> 통해 서버는 클라이언트와 세션을 연결
- JWT란 무엇인가요?
  - 웹 표준 기술인 JSON을 이용하여 토큰 기반 인증(Authentication)을 구현하기 위한 방법 중 하나
  - 세션(Session)과 같은 상태 정보를 서버에 저장하지 않고, 토큰(Token)을 이용하여 사용자 인증 정보를 전달하는 방식
    - **헤더(Header) :** JWT 토큰의 타입과 사용하는 해시 알고리즘 정보
    - **페이로드(Payload) :** JWT 토큰에 담길 정보, 즉 클라이언트에서 서버로 전달할 사용자 인증 정보
    - **서명(Signature) :** JWT 토큰을 서명하는데 사용되는 비밀키를 이용하여 생성
      - 토큰이 변경되지 않았는지 검증하는 역할
- JWT 토큰은 어디에 저장되고 어떻게 서버와 교환되나요?
  - 일반적으로 클라이언트 측에서 저장, 주로 브라우저의 웹 스토리지(LocalStorage, SessionStorage)나 쿠키(Cookie)에 저장
  - 사용자가 로그인하면, 서버는 JWT 토큰을 생성하여 클라이언트에게 전달
  - 클라이언트는 이 JWT 토큰을 로컬 저장소나 쿠키에 저장하고, 이를 이용하여 서버로 보내는 요청에 인증 정보를 첨부
  - 서버는 JWT 토큰을 검증하여 사용자 인증을 수행
  - WT 토큰의 유효성 검증은 서버에서 비밀키를 이용하여 서명을 검증하는 방식
  - JWT 토큰의 서명이 검증되지 않거나, 유효기간이 만료된 경우 인증 실패로 처리
- 세션에 비해 JWT가 가지는 장점은 무엇인가요? 또 JWT에 비해 세션이 가지는 장점은 무엇인가요?
  - **JWT의 장점**
    - 서버에서 상태를 관리하지 않기 때문에, 서버의 확장성 용이
    - 분산 시스템에서도 동작 가능, 다양한 클라이언트에서 사용 가능
    - 세션과 달리 서버에 저장할 필요가 없기 때문에 서버 자원 아끼기 가능
    - 필요한 정보를 포함하고 있으므로 서버에서 따로 DB를 조회할 필요 X, 성능 향상
    - 세션의 경우 서버 장애시 세션 정보가 유실될 수 있으나, JWT의 경우 토큰 자체가 모든 정보를 가지고 있기 때문에 별도의 저장소 불필요

## Quest

- 이번에는 메모장 시스템에 로그인 기능을 넣고자 합니다.
  - 사용자는 딱 세 명만 존재한다고 가정하고, 아이디와 비밀번호, 사용자의 닉네임은 하드코딩해도 무방합니다.
  - 로그인했을 때 해당 사용자가 이전에 작업했던 탭들과 마지막으로 활성화된 탭 등의 상태가 로딩 되어야 합니다.
  - 세션을 이용한 버전과, JWT를 이용한 버전 두 가지를 만들어 보세요!
    - 세션을 이용할 경우 세션은 서버의 메모리나 파일에 저장하면 됩니다.

## Advanced

- Web Authentication API(WebAuthn)은 무엇인가요?
